<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>GameOfLife</title>
    </head>

    <body>
        <canvas id="canvas" width="800" height="800"></canvas>
    </body>
    <script type="text/javascript">
    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");

    drawGrid();
    canvas.addEventListener('click', function(evt) {
        var mousePos = getMousePos(canvas, evt);
        var messageFloat = 'Mouse position: ' + mousePos.x + ',' + mousePos.y;
        var messageInt = 'Mouse position: ' + parseInt(mousePos.x/20) + ',' + parseInt(mousePos.y/20);
        //alert(messageInt);
        changeColor(mousePos);
     }, false);

     function getMousePos(canvas, evt) {
         var rect = canvas.getBoundingClientRect();
         return {x: evt.clientX - rect.left, y: evt.clientY - rect.top};
       }

    function changeColor(mousePos){
        var p = ctx.getImageData(mousePos.x, mousePos.y, 1, 1).data;
        //alert(p[0] + " "+p[1] + " "+p[2] + " "+p[3] );
        if(p[0]==0){
            ctx.fillStyle="rgb(250, 250, 250)";
            ctx.fillRect( parseInt(mousePos.x/20)*20+0.75, parseInt(mousePos.y/20)*20+0.75,18.75,18.75);
        }else{
            ctx.fillStyle="black";
            ctx.fillRect( parseInt(mousePos.x/20)*20+0.75, parseInt(mousePos.y/20)*20+0.75,18.75,18.75);
        }
    }

    function drawGrid(){
        ctx.fillStyle="black";
        ctx.fillRect(0,0,canvas.width,canvas.height);
        ctx.strokeStyle = "#666";
        ctx.beginPath();
        ctx.lineWidth = 1.5;
        for(var i=0; i<=canvas.height; i+=20) {
            ctx.moveTo(0, canvas.height-i);
            ctx.lineTo(canvas.width, canvas.height-i);
        }
        for(var i=0; i<=canvas.width; i+=20) {
            ctx.moveTo(canvas.width-i, 0);
            ctx.lineTo(canvas.width-i, canvas.height);
        }
        ctx.closePath();
        ctx.stroke();
    }

    </script>
</html>
